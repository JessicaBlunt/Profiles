
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Set-Up: Sensor Coefficients &#8212; oucass-profiles 1.3.0 documentation</title>
    <link rel="stylesheet" href="_static/nature1.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Set-up: Configuration" href="conf.html" />
    <link rel="prev" title="utils" href="utils.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      # TODO turn this into a link to index.html
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="set-up-sensor-coefficients">
<h1>Set-Up: Sensor Coefficients<a class="headerlink" href="#set-up-sensor-coefficients" title="Permalink to this headline">¶</a></h1>
<p>This page attempts to break down the
process of specifying your coefficients into manageable steps. If you get stuck,
send us a message using the contact form on our home page!</p>
<p>There are 2 ways to host your coefficients so that oucass-profiles can read them.
The simplest is to use CSV files in your local file system. Larger teams are likely to
prefer the instant updates possible when your coefficients are stored in Azure tables.</p>
<div class="section" id="local-file-system">
<h2>Local File System<a class="headerlink" href="#local-file-system" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-1-start-your-file-structure">
<h3>Step 1: Start your file structure<a class="headerlink" href="#step-1-start-your-file-structure" title="Permalink to this headline">¶</a></h3>
<p>First, you’re going to want to make a folder somewhere named “coefs”. It doesn’t
matter where you put this folder, just that the name is correct.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="n">coefs</span>
</pre></div>
</div>
</div>
<div class="section" id="step-2-assign-each-platform-a-unique-numerical-id">
<h3>Step 2: Assign each platform a unique numerical ID<a class="headerlink" href="#step-2-assign-each-platform-a-unique-numerical-id" title="Permalink to this headline">¶</a></h3>
<p>Inside coefs, create a file named “copterID.csv”. This file should contain
entries of the format</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span> <span class="n">of</span> <span class="n">copter</span> <span class="mi">1</span>
<span class="mi">2</span><span class="p">,</span> <span class="n">name</span> <span class="n">of</span> <span class="n">copter</span> <span class="mi">2</span>
<span class="mi">3</span><span class="p">,</span> <span class="n">name</span> <span class="n">of</span> <span class="n">copter</span> <span class="mi">3</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The numerical ID should be saved to the “SYSID_THISMAV” variable in your JSON
file so that each JSON file can be associated with a particular platform.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="n">coefs</span>
 <span class="o">|-</span><span class="n">copterID</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="step-3-assign-each-sensor-to-a-scoop">
<h3>Step 3: Assign each sensor to a “scoop”<a class="headerlink" href="#step-3-assign-each-sensor-to-a-scoop" title="Permalink to this headline">¶</a></h3>
<p>In profiles, a “scoop” is a collection of sensors. If your platforms have
interchangeable sensor loads, this can be really useful. If not, the “scoop”
will represent the platform itself.</p>
<p>Label each scoop (or platform) with a single uppercase letter. For each scoop,
create a file “scoop&lt;letter&gt;.csv” in coefs. For Scoop A, the file would be
called “scoopA.csv”. The format should be similar to</p>
<hr class="docutils" />
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>validFrom</p></td>
<td><p>imet1</p></td>
<td><p>imet2</p></td>
<td><p>imet3</p></td>
<td><p>rh1</p></td>
<td><p>rh2</p></td>
<td><p>rh3</p></td>
<td><p>wind</p></td>
</tr>
<tr class="row-even"><td><p>2019-08-29</p></td>
<td><p>57562</p></td>
<td><p>57563</p></td>
<td><p>58821</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>3</p></td>
<td><p>944</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>Any time a sensor is changed, a new line should be added to this file with the
date of the change and the new sensor numbers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="n">coefs</span>
 <span class="o">|-</span><span class="n">copterID</span><span class="o">.</span><span class="n">csv</span>
 <span class="o">|-</span><span class="n">scoopA</span><span class="o">.</span><span class="n">csv</span>
 <span class="o">|-</span><span class="n">scoopB</span><span class="o">.</span><span class="n">csv</span>
 <span class="o">|-...</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-supply-the-coefficients">
<h3>Step 4: Supply the coefficients<a class="headerlink" href="#step-4-supply-the-coefficients" title="Permalink to this headline">¶</a></h3>
<p>Now that profiles will be able to identify which sensors you’re using, it’s
probably a good idea to tell it the coefficients of those sensors. We’ll make
one more file in the coefs folder, this time named “MasterCoefList.csv”. The
header for this file should be</p>
<hr class="docutils" />
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>SensorType</p></td>
<td><p>SerialNumber</p></td>
<td><p>ScoopID</p></td>
<td><p>Equation</p></td>
<td><p>A</p></td>
<td><p>B</p></td>
<td><p>C</p></td>
<td><p>D</p></td>
<td><p>Offset</p></td>
<td><p>SensorStatus</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>Each sensor gets its own row. Any field that isn’t applicable to a sensor should
be filled with “na”. Profiles currently supports 3 types of sensors.</p>
<div class="section" id="wind">
<h4>Wind<a class="headerlink" href="#wind" title="Permalink to this headline">¶</a></h4>
<p>“Wind” is recognized as a sensor type, although the “sensor” in this case is
the copter itself. The serial number is the copter’s name. If you have
interchangeable scoops, the scoop field should be “na”. Otherwise, you can set
it to the scoop letter associated with the platform.</p>
<p>The equation for wind should be “E1”, unless you decide to write your own
calibration equation. The default calibration equation requires two
coefficients and no offset. The sensor status column is for your personal
records.</p>
<p>A row describing a wind sensor should look something like this:</p>
<hr class="docutils" />
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>SensorType</p></td>
<td><p>SerialNumber</p></td>
<td><p>ScoopID</p></td>
<td><p>Equation</p></td>
<td><p>A</p></td>
<td><p>B</p></td>
<td><p>C</p></td>
<td><p>D</p></td>
<td><p>Offset</p></td>
<td><p>SensorStatus</p></td>
</tr>
<tr class="row-even"><td><p>Wind</p></td>
<td><p>944</p></td>
<td><p>na</p></td>
<td><p>E1</p></td>
<td><p>3.28E+01</p></td>
<td><p>-4.50E+00</p></td>
<td><p>na</p></td>
<td><p>na</p></td>
<td><p>na</p></td>
<td><p>Active</p></td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="imet">
<h4>IMet<a class="headerlink" href="#imet" title="Permalink to this headline">¶</a></h4>
<p>The IMet sensor handles temperature. A row describing an IMet sensor could look
like this:</p>
<hr class="docutils" />
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>SensorType</p></td>
<td><p>SerialNumber</p></td>
<td><p>ScoopID</p></td>
<td><p>Equation</p></td>
<td><p>A</p></td>
<td><p>B</p></td>
<td><p>C</p></td>
<td><p>D</p></td>
<td><p>Offset</p></td>
<td><p>SensorStatus</p></td>
</tr>
<tr class="row-even"><td><p>Imet</p></td>
<td><p>45363</p></td>
<td><p>na</p></td>
<td><p>E2</p></td>
<td><p>9.93118592E-04</p></td>
<td><p>2.63743049E-04</p></td>
<td><p>1.47415476E-07</p></td>
<td><p>na</p></td>
<td><p>na</p></td>
<td><p>Retired</p></td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="rh">
<h4>RH<a class="headerlink" href="#rh" title="Permalink to this headline">¶</a></h4>
<p>There is not currently a calibration equation for relative humidity - instead,
an offset is accepted. A line for an RH sensor should look like this:</p>
<hr class="docutils" />
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>SensorType</p></td>
<td><p>SerialNumber</p></td>
<td><p>ScoopID</p></td>
<td><p>Equation</p></td>
<td><p>A</p></td>
<td><p>B</p></td>
<td><p>C</p></td>
<td><p>D</p></td>
<td><p>Offset</p></td>
<td><p>SensorStatus</p></td>
</tr>
<tr class="row-even"><td><p>RH</p></td>
<td><p>3</p></td>
<td><p>A</p></td>
<td><p>na</p></td>
<td><p>na</p></td>
<td><p>na</p></td>
<td><p>na</p></td>
<td><p>na</p></td>
<td><p>1843</p></td>
<td><p>Active</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>At this point, your coef folder should contain the following files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="n">coefs</span>
 <span class="o">|-</span><span class="n">copterID</span><span class="o">.</span><span class="n">csv</span>
 <span class="o">|-</span><span class="n">scoopA</span><span class="o">.</span><span class="n">csv</span>
 <span class="o">|-</span><span class="n">scoopB</span><span class="o">.</span><span class="n">csv</span>
 <span class="o">|-...</span>
 <span class="o">|-</span><span class="n">MasterCoefList</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="azure-tables">
<h2>Azure Tables<a class="headerlink" href="#azure-tables" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-1-create-an-azure-storage-account">
<h3>Step 1: Create an Azure “Storage Account”<a class="headerlink" href="#step-1-create-an-azure-storage-account" title="Permalink to this headline">¶</a></h3>
<p>Make an account for your team at <a class="reference external" href="https://www.portal.azure.com">https://www.portal.azure.com</a>. You can get set up with a free account, but will eventually need to transition to a paid account. Individual team members can make changes to the team account from personal, free accounts.</p>
<p>The easiest way to interact with your Storage Account is through Microsoft Azure Storage Explorer.</p>
</div>
<div class="section" id="id1">
<h3>Step 2: Assign each platform a unique numerical ID<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Each platform (UAS) will need to have an ID, in addition to a name. The ID should be saved to the “SYSID_THISMAV” variable in your JSON file.</p>
<p>Create a new Table in your Storage Account named “Copters”. The PartitionKey can be whatever you’d like, or you can leave it set to “default”. The CopterID should be assigned to RowKey, with the name of the copter in a new Property (column) called “Name”</p>
</div>
<div class="section" id="id2">
<h3>Step 3: Assign each sensor to a “scoop”<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>In oucass-profiles, a “scoop” is a collection of sensors that are used together. If your platforms have interchangable sensor loads, this can be really useful. If not, the “scoop” will represent the platform itself.</p>
<p>Using Azure allows you more freedom in chosing your scoop names. You can use single character names (such as “A”) or descriptive names (like “ChemFW1”). Assign these names to the PartitionKey of each row in a new table called “Scoops”. The RowKey must be a date in the format YYYYMMDD and should represent the day on which the listed sensors were installed on the scoop. Don’t delete outdated entries - oucass-profiles will make sure to use the serial numbers associated with thelatest scoop entry BEFORE the flight date.</p>
<p>The Parameters of the Scoops table should be “Engineer”, “IMET1”, “IMET2”, …, “RH1”, “RH2”, … The Engineer field can be used to identify the person who created an entry in the case of any discrepancies.</p>
</div>
<div class="section" id="id3">
<h3>Step 4: Supply the coefficients<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The next Table to create in your Storage Account is “MasterCoef”. There should be one row per sensor in your inventory. The PartitionKey identifies the type of sensor (“Imet”, “RH”, or “Wind”), while the RowKey specifies the sensor’s serial number. The serial number “0” is used to specify default coefficients for rough calculations when specific coefficients are not available.</p>
<p>The Parameters “A”, “B”, “C”, “D”, and “Offset” must exist in your table. The lettered columns hold the actual coefficients to convert resistance or voltage to some atmospheric property. “Offset” is used when a sensor (typically an RH sensor) is corrected for bias. Additional Parameters can be added according to your team’s needs.</p>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      # TODO turn this into a link to index.html
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Jessica Blunt, Tyler Bell, Brian Greene, Gus Azevedo, and Ariel Jacobs.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>